Общая информация
Система: API сервиса объявлений
Базовый URL: https://qa-internship.avito.com
Формат данных: JSON
Протокол: HTTP
Версии API: v1, v2
Общие предусловия
Все запросы отправляются с заголовком Accept: application/json
Для POST-запросов используется заголовок Content-Type: application/json
Используется уникальный sellerId в диапазоне 111111–999999
Все ID объявлений считаются строковыми
Тесты выполняются в изолированной среде, данные могут удаляться

1. Создание объявления
POST /api/1/item
TC-POST-ITEM-001
Название: Успешное создание объявления с валидными данными
Предусловия: отсутствуют
Шаги:
Отправить POST-запрос на /api/1/item
Передать тело запроса:
{
  "sellerID": 123456,
  "name": "iPhone 13",
  "price": 70000,
  "statistics": {
    "likes": 0,
    "viewCount": 0,
    "contacts": 0
  }
}

Ожидаемый результат:
HTTP статус: 200 OK
В теле ответа присутствуют поля:
id
sellerId
name
price
statistics
createdAt
Значение id не пустое
Значение sellerId соответствует переданному
Поле createdAt заполнено строкой в формате даты и времени

TC-POST-ITEM-002
Название: Создание объявления с нулевыми значениями статистики
Шаги:
Отправить POST-запрос с likes = 0, viewCount = 0, contacts = 0
Ожидаемый результат:
HTTP статус: 200 OK
Значения статистики сохранены корректно

TC-POST-ITEM-003
Название: Создание объявления без обязательного поля sellerID
Шаги:
Отправить POST-запрос без поля sellerID
Ожидаемый результат:
HTTP статус: 400 Bad Request
В ответе возвращается объект ошибки

TC-POST-ITEM-004
Название: Создание объявления без поля name
Шаги:
Отправить POST-запрос без поля name
Ожидаемый результат:
HTTP статус: 400 Bad Request

TC-POST-ITEM-005
Название: Создание объявления без поля price
Шаги:
Отправить POST-запрос без поля price
Ожидаемый результат:
HTTP статус: 400 Bad Request

TC-POST-ITEM-006
Название: Создание объявления с некорректным типом sellerID
Шаги:
Передать "sellerID": "abc"
Ожидаемый результат:
HTTP статус: 400 Bad Request

TC-POST-ITEM-007
Название: Создание объявления с отрицательной ценой
Шаги:
Передать "price": -100
Ожидаемый результат:
HTTP статус: 400 Bad Request

TC-POST-ITEM-008
Название: Создание объявления с отрицательными значениями статистики
Шаги:
Передать отрицательные значения в statistics
Ожидаемый результат:
HTTP статус: 400 Bad Request
TC-POST-ITEM-009
Название: Создание объявления с пустым телом запроса
Шаги:
Отправить POST-запрос с телом {}
Ожидаемый результат:
HTTP статус: 400 Bad Request

2. Получение объявления по ID
GET /api/1/item/:id
TC-GET-ITEM-001
Название: Получение существующего объявления по ID
Предусловия: объявление создано
Шаги:
Отправить GET-запрос с валидным id
Ожидаемый результат:
HTTP статус: 200 OK
В ответе возвращается массив
Массив содержит один объект
id объекта совпадает с запрошенным
TC-GET-ITEM-002
Название: Получение объявления по несуществующему ID
Шаги:
Отправить GET-запрос с несуществующим id
Ожидаемый результат:
HTTP статус: 404 Not Found

TC-GET-ITEM-003
Название: Получение объявления с некорректным ID
Шаги:
Отправить GET-запрос с id, содержащим спецсимволы
Ожидаемый результат:
HTTP статус: 400 Bad Request
TC-GET-ITEM-004
Название: Проверка структуры объекта объявления
Шаги:
Получить объявление по валидному id
Ожидаемый результат:
Все поля соответствуют модели данных
Типы данных корректны

3. Получение объявлений продавца
GET /api/1/:sellerID/item
TC-GET-SELLER-ITEMS-001
Название: Получение всех объявлений продавца
Предусловия: у продавца есть объявления
Шаги:
Отправить GET-запрос с валидным sellerID
Ожидаемый результат:
HTTP статус: 200 OK
Возвращается массив объявлений
Все объявления имеют одинаковый sellerId

TC-GET-SELLER-ITEMS-002
Название: Получение объявлений продавца без объявлений
Шаги:
Отправить GET-запрос с sellerID, у которого нет объявлений
Ожидаемый результат:
HTTP статус: 200 OK
Возвращается пустой массив

TC-GET-SELLER-ITEMS-003
Название: Получение объявлений с некорректным sellerID
Шаги:
Передать sellerID строкового типа
Ожидаемый результат:
HTTP статус: 400 Bad Request

4. Получение статистики объявления (v1)
GET /api/1/statistic/:id
TC-GET-STAT-V1-001
Название: Получение статистики существующего объявления
Шаги:
Отправить GET-запрос с валидным id
Ожидаемый результат:
HTTP статус: 200 OK
Возвращается массив
Объект содержит likes, viewCount, contacts

TC-GET-STAT-V1-002
Название: Получение статистики несуществующего объявления
Ожидаемый результат:
HTTP статус: 404 Not Found

TC-GET-STAT-V1-003
Название: Получение статистики с некорректным ID
Ожидаемый результат:
HTTP статус: 400 Bad Request

5. Удаление объявления
DELETE /api/2/item/:id
TC-DELETE-ITEM-001
Название: Успешное удаление существующего объявления
Предусловия: объявление существует
Шаги:
Отправить DELETE-запрос с валидным id
Ожидаемый результат:
HTTP статус: 200 OK
Тело ответа пустое

TC-DELETE-ITEM-002
Название: Повторное удаление одного и того же объявления
Шаги:
Удалить объявление
Повторить DELETE-запрос
Ожидаемый результат:
HTTP статус: 404 Not Found

6. Получение статистики объявления (v2)
GET /api/2/statistic/:id
TC-GET-STAT-V2-001
Название: Получение статистики существующего объявления
Ожидаемый результат:
HTTP статус: 200 OK
Формат данных соответствует модели статистики

TC-GET-STAT-V2-002
Название: Получение статистики удалённого объявления
Ожидаемый результат:
HTTP статус: 404 Not Found

7. Общие проверки API
TC-COMMON-001
Название: Проверка заголовка Content-Type в ответах
Ожидаемый результат:
Content-Type содержит application/json

TC-COMMON-002
Название: Проверка структуры ошибки
Ожидаемый результат:
Ответ содержит поля result.message и status